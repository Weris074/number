<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ò–≥—Ä–∞ –£–≥–∞–¥–∞–π –ß–∏—Å–ª–æ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
            background-image: linear-gradient(to right bottom, #fcefe8, #f7cfba); /* –¶–≤–µ—Ç —Ñ–æ–Ω–∞ */
            animation: bg-pulse 20s infinite alternate; /* –ó–∞–º–µ–¥–ª–∏–ª –ø—É–ª—å—Å–∞—Ü–∏—é */
        }
        
        @keyframes bg-pulse {
            from {background-position: 0%; transform: scale(1);} 
            to {background-position: 100%; transform: scale(1.02); animation-timing-function: ease-in-out;} /* –£–º–µ–Ω—å—à–∏–ª –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ */
        }
        
        h1 {
            color: white;
            font-size: 3rem;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        input[type=number], button {
            padding: 20px;
            font-size: 20px;
            border-radius: 15px;
            outline: none;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease-in-out;
            cursor: pointer;
        }
        
        input[type=number]:hover,
        button:hover {
            background-color: #fffaf0;
            transform: scale(1.05);
        }
        
        input[type=number]:focus,
        button:focus {
            background-color: #ffe4b5;
        }
        
        p#result {
            font-weight: bold;
            color: green;
            font-size: 1.5rem;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            from {transform: scale(1)}
            to {transform: scale(1.05)}
        }
        
        p#message {
            font-style: italic;
            color: white;
            font-size: 1.2rem;
            text-shadow: 2px 2px 2px rgba(0,0,0,2);
        }
        
        ul#clues-list li {
            list-style-type: circle;
            line-height: 1.5em;
            color: #333; /* –°–¥–µ–ª–∞–ª —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ */
            text-shadow: none; /* –£–±—Ä–∞–ª —Ç–µ–Ω—å, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–∞ */
        }
        
        .green-text { color: limegreen !important; }
        .yellow-text { color: gold !important; }
        .blue-text { color: dodgerblue !important; }
        .red-text { color: tomato !important; }

        #achievements-container {
            margin-top: 40px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        #achievements-container h2 {
            color: #333;
            margin-bottom: 15px;
        }
        .achievement-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #555;
        }
        .achievement-item.unlocked {
            color: #28a745; /* Green for unlocked */
            font-weight: bold;
        }
        .achievement-item::before {
            content: 'üîí';
            margin-right: 10px;
            font-size: 1.3rem;
        }
        .achievement-item.unlocked::before {
            content: 'üèÜ'; /* Trophy for unlocked */
        }

        #footer-buttons {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
        }
        #footer-buttons button {
            padding: 10px 15px;
            font-size: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #footer-buttons button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<h1 id="game-title">üéâ –ò–≥—Ä–∞ ¬´–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ!¬ª üéâ</h1>
<p id="message">–ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100!</p>
<input type="number" min="1" max="100" placeholder="–í–≤–µ–¥–∏ —á–∏—Å–ª–æ..." id="guessInput">
<button id="check-button" onclick="checkGuess()">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å!</button><br><br>
<button id="reset-button" onclick="resetGame()">üîÑ Reset Game</button>
<p id="result"></p>
<div id="clues-header" style="margin-top: 20px;">–ü–æ–¥—Å–∫–∞–∑–∫–∏:</div>
<ul id="clues-list"></ul>

<div id="achievements-container">
    <h2 id="achievements-title">–¢–≤–æ–∏ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
    <div id="achievements-list">
        <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ JavaScript-–æ–º -->
    </div>
</div>

<div id="footer-buttons">
    <button id="report-button" onclick="reportBug()">–°–æ–æ–±—â–∏—Ç—å –æ –±–∞–≥–µ</button>
    <button id="lang-button" onclick="toggleLanguage()">Eng</button>
</div>

<script>
let targetNumber;
let attempts;
let history = []; 
let clues = [];
let availableClueOptions = []; 
let currentLang = localStorage.getItem('guessTheNumberLang') || 'ru'; // –ó–∞–≥—Ä—É–∑–∫–∞ —è–∑—ã–∫–∞ –∏–ª–∏ —Ä—É—Å—Å–∫–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

const texts = {
    'ru': {
        gameTitle: 'üéâ –ò–≥—Ä–∞ ¬´–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ!¬ª üéâ',
        message: '–ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100!',
        inputPlaceholder: '–í–≤–µ–¥–∏ —á–∏—Å–ª–æ...',
        checkButton: '‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å!',
        resetButton: 'üîÑ Reset Game',
        resultEnterNumber: '–ù—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100!',
        resultAlreadyGuessed: '–¢—ã —É–∂–µ —ç—Ç–æ —á–∏—Å–ª–æ –≤–≤–æ–¥–∏–ª! –ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–µ.',
        resultCorrect: (num, att) => `üéâ –í–µ—Ä–Ω–æ! –¢—ã —É–≥–∞–¥–∞–ª —á–∏—Å–ª–æ ${num}. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: ${att} üéâ`,
        resultTooHigh: '–ù–µ–≤–µ—Ä–Ω–æ! –°–¥–µ–ª–∞–π —á–∏—Å–ª–æ –ø–æ–º–µ–Ω—å—à–µ.',
        resultTooLow: '–ù–µ–≤–µ—Ä–Ω–æ! –°–¥–µ–ª–∞–π —á–∏—Å–ª–æ –ø–æ–±–æ–ª—å—à–µ.',
        cluesHeader: '–ü–æ–¥—Å–∫–∞–∑–∫–∏:',
        achievementsTitle: '–¢–≤–æ–∏ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
        achievements: {
            'genius_guess': { name: '–û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –¥–ª—è –≥–µ–Ω–∏—è', description: '–£–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ —Å 1 —Ä–∞–∑–∞' },
            'easy_peasy': { name: '–≠—Ç–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ', description: '–£–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ –¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫' },
            'first_win': { name: '–Ø —Å–¥–µ–ª–∞–ª —ç—Ç–æ', description: '–£–≥–∞–¥–∞—Ç—å –≤–ø–µ—Ä–≤—ã–µ' }
        },
        alertAchieveGenius: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –¥–ª—è –≥–µ–Ω–∏—è!',
        alertAchieveEasy: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: –≠—Ç–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ!',
        alertAchieveFirst: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: –Ø —Å–¥–µ–ª–∞–ª —ç—Ç–æ!',
        reportButton: '–°–æ–æ–±—â–∏—Ç—å –æ –±–∞–≥–µ',
        langButton: 'Eng',
        clueMoreThan: (num) => `–ß–∏—Å–ª–æ —Ç–æ—á–Ω–æ –±–æ–ª—å—à–µ ${num}`,
        clueLessThan: (num) => `–ß–∏—Å–ª–æ —Ç–æ—á–Ω–æ –º–µ–Ω—å—à–µ ${num}`,
        clueClosestSquare: (num) => `–≠—Ç–æ —á–∏—Å–ª–æ –±–ª–∏–∂–µ –≤—Å–µ–≥–æ –∫ –∫–≤–∞–¥—Ä–∞—Ç—É —á–∏—Å–ª–∞ ${num}`,
        clueEven: '–≠—Ç–æ —á–∏—Å–ª–æ —á—ë—Ç–Ω–æ–µ',
        clueOdd: '–≠—Ç–æ —á–∏—Å–ª–æ –Ω–µ—á—ë—Ç–Ω–æ–µ',
        cluePrime: '–≠—Ç–æ —á–∏—Å–ª–æ –ø—Ä–æ—Å—Ç–æ–µ',
        clueNotPrime: '–≠—Ç–æ —á–∏—Å–ª–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ–µ',
        clueDivisibleBy: (num) => `–≠—Ç–æ —á–∏—Å–ª–æ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ ${num}`,
        clueSumOfDigits: (sum) => `–°—É–º–º–∞ —Ü–∏—Ñ—Ä —á–∏—Å–ª–∞ —Ä–∞–≤–Ω–∞ ${sum}`,
    },
    'en': {
        gameTitle: 'üéâ Guess The Number Game! üéâ',
        message: 'Try to guess the number from 1 to 100!',
        inputPlaceholder: 'Enter your guess...',
        checkButton: '‚úÖ Check!',
        resetButton: 'üîÑ Reset Game',
        resultEnterNumber: 'You must enter a number between 1 and 100!',
        resultAlreadyGuessed: 'You already guessed this number! Try another.',
        resultCorrect: (num, att) => `üéâ Correct! You guessed ${num}. Attempts: ${att} üéâ`,
        resultTooHigh: 'Incorrect! Go lower.',
        resultTooLow: 'Incorrect! Go higher.',
        cluesHeader: 'Clues:',
        achievementsTitle: 'Your Achievements',
        achievements: {
            'genius_guess': { name: 'Genius Guess', description: 'Guess the number in 1 attempt' },
            'easy_peasy': { name: 'Easy Peasy', description: 'Guess the number in less than 5 attempts' },
            'first_win': { name: 'I Did It', description: 'Win for the first time' }
        },
        alertAchieveGenius: 'Achievement Unlocked: Genius Guess!',
        alertAchieveEasy: 'Achievement Unlocked: Easy Peasy!',
        alertAchieveFirst: 'Achievement Unlocked: I Did It!',
        reportButton: 'Report Bug',
        langButton: 'Ru',
        clueMoreThan: (num) => `The number is definitely greater than ${num}`,
        clueLessThan: (num) => `The number is definitely less than ${num}`,
        clueClosestSquare: (num) => `This number is closest to the square of ${num}`,
        clueEven: 'This number is even',
        clueOdd: 'This number is odd',
        cluePrime: 'This number is prime',
        clueNotPrime: 'This number is not prime',
        clueDivisibleBy: (num) => `This number is divisible by ${num}`,
        clueSumOfDigits: (sum) => `The sum of the digits is ${sum}`,
    }
};

// –û–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
let achievements = {
    'genius_guess': { name: '', description: '', unlocked: false },
    'easy_peasy': { name: '', description: '', unlocked: false },
    'first_win': { name: '', description: '', unlocked: false }
};

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏–∑ localStorage
function loadAchievements() {
    const savedAchievements = localStorage.getItem('guessTheNumberAchievements');
    if (savedAchievements) {
        const parsed = JSON.parse(savedAchievements);
        for(const key in achievements) {
            if (parsed[key]) {
                achievements[key].unlocked = parsed[key].unlocked;
            }
        }
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ localStorage
function saveAchievements() {
    localStorage.setItem('guessTheNumberAchievements', JSON.stringify(achievements));
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–æ–º
function updateTexts() {
    const currentTexts = texts[currentLang];

    document.getElementById('game-title').textContent = currentTexts.gameTitle;
    document.getElementById('message').textContent = currentTexts.message;
    document.getElementById('guessInput').placeholder = currentTexts.inputPlaceholder;
    document.getElementById('check-button').textContent = currentTexts.checkButton;
    document.getElementById('reset-button').textContent = currentTexts.resetButton;
    document.getElementById('clues-header').textContent = currentTexts.cluesHeader;
    document.getElementById('achievements-title').textContent = currentTexts.achievementsTitle;
    document.getElementById('report-button').textContent = currentTexts.reportButton;
    document.getElementById('lang-button').textContent = currentTexts.langButton;

    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–º–µ–Ω–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞
    for (const key in achievements) {
        achievements[key].name = currentTexts.achievements[key].name;
        achievements[key].description = currentTexts.achievements[key].description;
    }

    renderAchievements();
    updateClues(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —è–∑—ã–∫–µ
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
function toggleLanguage() {
    currentLang = currentLang === 'ru' ? 'en' : 'ru';
    localStorage.setItem('guessTheNumberLang', currentLang);
    updateTexts();
}

// –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–†–µ–ø–æ—Ä—Ç" (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)
function reportBug() {
    alert(currentLang === 'ru' ? '–°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±–∞–≥–µ! –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —É–∂–µ –±–µ–∂–∏—Ç.' : 'Thanks for reporting a bug! Developer is on the way.');
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
function renderAchievements() {
    const achievementsList = document.getElementById('achievements-list');
    achievementsList.innerHTML = '';

    for (const key in achievements) {
        const ach = achievements[key];
        const item = document.createElement('div');
        item.classList.add('achievement-item');
        if (ach.unlocked) {
            item.classList.add('unlocked');
        }
        item.textContent = `${ach.name}: ${ach.description}`;
        achievementsList.appendChild(item);
    }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
function checkAchievements() {
    const currentTexts = texts[currentLang];
    if (attempts === 1 && !achievements.genius_guess.unlocked) {
        achievements.genius_guess.unlocked = true;
        alert(currentTexts.alertAchieveGenius);
    }
    if (attempts <= 5 && !achievements.easy_peasy.unlocked) {
        achievements.easy_peasy.unlocked = true;
        alert(currentTexts.alertAchieveEasy);
    }
    if (!achievements.first_win.unlocked) {
        achievements.first_win.unlocked = true;
        alert(currentTexts.alertAchieveFirst);
    }
    saveAchievements();
    renderAchievements();
}

// –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞
function generateRandomNumber() {
    return Math.floor(Math.random() * 100) + 1;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —á–∏—Å–ª–∞
function isPrime(num) {
    for (let i = 2, s = Math.sqrt(num); i <= s; i++) {
        if (num % i === 0) return false;
    }
    return num > 1;
}

// –ù–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à–µ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –±–ª–∏–∑–∫–æ–µ –∫ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–º—É –∫–æ—Ä–Ω—é
function closestSquareRoot(num) {
    return Math.round(Math.sqrt(num));
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—É–º–º—ã —Ü–∏—Ñ—Ä —á–∏—Å–ª–∞
function sumDigits(num) {
    let sum = 0;
    let strNum = String(num); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —á–∏—Å–ª–æ –≤ —Å—Ç—Ä–æ–∫—É
    for (let i = 0; i < strNum.length; i++) {
        sum += parseInt(strNum[i], 10); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –æ–±—Ä–∞—Ç–Ω–æ –≤ —á–∏—Å–ª–æ –∏ —Å–∫–ª–∞–¥—ã–≤–∞–µ–º
    }
    return sum;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã
function initializeClueOptions() {
    const currentTexts = texts[currentLang];
    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫
    availableClueOptions = []; 

    // –ü–æ–¥—Å–∫–∞–∑–∫–∞ "–±–æ–ª—å—à–µ —á–µ–º X"
    const lowerBoundForMoreThan = Math.max(1, targetNumber - Math.floor(Math.random() * 10) - 1);
    availableClueOptions.push(() => currentTexts.clueMoreThan(lowerBoundForMoreThan));

    // –ü–æ–¥—Å–∫–∞–∑–∫–∞ "–º–µ–Ω—å—à–µ —á–µ–º Y"
    const upperBoundForLessThan = Math.min(100, targetNumber + Math.floor(Math.random() * 10) + 1);
    availableClueOptions.push(() => currentTexts.clueLessThan(upperBoundForLessThan));

    availableClueOptions.push(() => currentTexts.clueClosestSquare(closestSquareRoot(targetNumber)));

    if (targetNumber % 2 === 0) {
        availableClueOptions.push(() => currentTexts.clueEven);
    } else {
        availableClueOptions.push(() => currentTexts.clueOdd);
    }

    if (isPrime(targetNumber)) {
        availableClueOptions.push(() => currentTexts.cluePrime);
    } else if (targetNumber > 1) { 
        availableClueOptions.push(() => currentTexts.clueNotPrime);
    }

    // –ù–û–í–ê–Ø –ü–û–î–°–ö–ê–ó–ö–ê: –î–µ–ª–∏—Ç—Å—è –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
    // –í—ã–±–∏—Ä–∞–µ–º –¥–µ–ª–∏—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2, 3, 4, 5, 6, 7, 8, 9, 10)
    // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —á–∏—Å–ª–æ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —ç—Ç–æ—Ç –¥–µ–ª–∏—Ç–µ–ª—å –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–∞
    if (targetNumber > 1) { 
        const possibleDivisors = [2, 3, 4, 5, 6, 7, 8, 9, 10];
        const validDivisors = possibleDivisors.filter(d => targetNumber % d === 0);
        
        if (validDivisors.length > 0) {
            const randomDivisor = validDivisors[Math.floor(Math.random() * validDivisors.length)];
            availableClueOptions.push(() => currentTexts.clueDivisibleBy(randomDivisor));
        }
    }

    // –ù–û–í–ê–Ø –ü–û–î–°–ö–ê–ó–ö–ê: –°—É–º–º–∞ —Ü–∏—Ñ—Ä
    if (targetNumber > 0) { // –°—É–º–º–∞ —Ü–∏—Ñ—Ä –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –¥–ª—è –ª—é–±–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞
        availableClueOptions.push(() => currentTexts.clueSumOfDigits(sumDigits(targetNumber)));
    }
}

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–≥—Ä—É
function setupGame() {
    targetNumber = generateRandomNumber();
    attempts = 0;
    history = [];
    clues = [];
    initializeClueOptions();
    updateClues();
    console.log("–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ:", targetNumber);
}

// –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–≤–æ–¥–∞
function checkGuess() {
    const guessInput = document.getElementById('guessInput');
    const guess = parseInt(guessInput.value.trim(), 10);
    const resultElement = document.getElementById('result');
    const messageElement = document.getElementById('message');
    const currentTexts = texts[currentLang];

    if (!guess || isNaN(guess) || guess < 1 || guess > 100) {
        alert(currentTexts.resultEnterNumber);
        guessInput.value = '';
        return;
    }

    if (history.includes(guess)) {
        resultElement.classList.remove('green-text', 'yellow-text', 'blue-text');
        resultElement.classList.add('red-text');
        resultElement.textContent = currentTexts.resultAlreadyGuessed;
        guessInput.value = '';
        return;
    }

    attempts++;
    history.push(guess);

    if (guess === targetNumber) {
        resultElement.classList.remove('yellow-text', 'blue-text', 'red-text');
        resultElement.classList.add('green-text');
        resultElement.textContent = currentTexts.resultCorrect(targetNumber, attempts);
        messageElement.style.display = 'none';
        guessInput.disabled = true; 
        checkAchievements(); 
    } else if (guess > targetNumber) {
        resultElement.classList.remove('green-text', 'yellow-text', 'blue-text');
        resultElement.classList.add('red-text');
        resultElement.textContent = currentTexts.resultTooHigh;
    } else {
        resultElement.classList.remove('green-text', 'yellow-text', 'red-text');
        resultElement.classList.add('blue-text');
        resultElement.textContent = currentTexts.resultTooLow;
    }

    updateClues();
    guessInput.value = ''; 
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫
function updateClues() {
    let cluesElement = document.getElementById('clues-list');
    cluesElement.innerHTML = '';

    if (clues.length < attempts && availableClueOptions.length > 0) {
        let randomIndex = Math.floor(Math.random() * availableClueOptions.length);
        let newClue = availableClueOptions.splice(randomIndex, 1)[0]; 
        clues.push(newClue());
    }

    clues.forEach((clue, index) => {
        let item = document.createElement('li');
        item.textContent = `${index + 1}) ${clue}`;
        cluesElement.appendChild(item);
    });
}

// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
function resetGame() {
    setupGame(); 
    const resultElement = document.getElementById('result');
    const messageElement = document.getElementById('message');
    const guessInput = document.getElementById('guessInput');

    resultElement.textContent = '';
    resultElement.classList.remove('green-text', 'yellow-text', 'blue-text', 'red-text');
    messageElement.style.display = '';
    messageElement.textContent = texts[currentLang].message;
    guessInput.value = '';
    guessInput.disabled = false;
    renderAchievements();
    updateTexts(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—ã –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ —è–∑—ã–∫ –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
loadAchievements();
setupGame();
updateTexts(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
renderAchievements();
</script>

</body>
</html>
